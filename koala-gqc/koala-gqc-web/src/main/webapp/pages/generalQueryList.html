<div id="generalQueryGrid"></div>
<script src="js/generalQuery.js"></script>
<script>
    $(function(){
       var cols = [
            {title:'查询器名称', name:'queryName', width: '150px'},
            { title:'描述', name:'description' , width: '150px'},
            { title:'数据源', name:'dataSourceId', width: '150px'},
            { title:'查询表', name:'tableName' , width: '250px'},
            { title:'预览', name:'preview' , width: 'auto', render: function(item, name, index){
                return '<a href="#" onclick="generalQuery().preview('+item.id+')"><i class="glyphicon glyphicon-eye-open"></i>&nbsp;预览</a>';
            }}
        ];
        $('#generalQueryGrid').grid({
             identity: 'id',
             columns: cols,
             isShowButtons: true,
             querys: [{title: '查询器名称', value: 'queryName'}],
             url: 'generalquery/pageJson.koala'
        }).on({
                    'add': function(){
                        generalQuery().add( $(this));
                    },
                    'modify': function(event, index){
                        generalQuery().modify(index, $(this));
                    },
                    'delete': function(event, indexs, callback){
                        var $this = $(this);
                        $this.confirm({
                            content: '确定要删除所选记录吗?',
                            callBack: function(){ generalQuery().del(indexs, $this);}
                        });
                    }
        })
    })
</script>











































































































































